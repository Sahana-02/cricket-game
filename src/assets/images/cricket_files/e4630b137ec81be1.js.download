(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[1117],{

/***/ 762750:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(813110);self._fe4d99ebe0d2d259646a80d250150d47 = self._fe4d99ebe0d2d259646a80d250150d47 || {};(function(__c) {var hq;var aab,bab,cab,fab,gab,iab,lab,mab,oab,pab,rab,yab,wab,xab,zab;__c.X$a=function(a){var b=a.id;var c=a.id;a=__c.Vf(a.Od);c=__c.Mg(__c.Lg(__c.nva(c),"ui",a));return new __c.Wh({je:b,path:c})};__c.Y$a=function(a){return a?__c.Mg(__c.Kg(["creators","element",a])):__c.Mg(__c.Kg(["creators","element"]))};__c.$$a=function(a){const b=(a.name.split(".").pop()||"").toLowerCase();return{content:a,name:a.name,type:__c.Z$a.get(b)||a.type}};
aab=function(a){const b=a.create();b.LTa=c=>{var d;null===(d=a.LTa)||void 0===d?void 0:d.call(a,c)};return b};bab=function(a,b){if(!b)return Array(a.meta.length).fill(0);const c=a.meta.length*a.length;if(b.flat().length!==c)throw new hq(`Could not set uniform '${a.meta.type} ${a.name}'. Expected data with a length of ${c} but your data has a length of ${b.length}.`);return b};
cab=function(a,b){const c=b.meta,d=b.name,e=b.location;b=b.data.flat();if("int"===c.type)switch(c.length){case 1:a.uniform1iv(e,b);break;case 2:a.uniform2iv(e,b);break;case 3:a.uniform3iv(e,b);break;case 4:a.uniform4iv(e,b);break;default:throw new hq(`Could not set the value for uniform '${d}'. Make sure its length is between 1 and 4 (inclusive).`);}else if("float"===c.type)switch(c.length){case 1:a.uniform1fv(e,b);break;case 2:a.uniform2fv(e,b);break;case 3:a.uniform3fv(e,b);break;case 4:a.uniform4fv(e,
b);break;default:throw new hq(`Could not set the value for uniform '${d}'. Make sure its length is between 1 and 4 (inclusive).`);}else switch(c.length){case 4:a.uniformMatrix2fv(e,!1,b);break;case 9:a.uniformMatrix3fv(e,!1,b);break;case 16:a.uniformMatrix4fv(e,!1,b);break;default:throw new hq(`Could not set the value for uniform '${d}'. Make sure its length is between 2 and 4 (inclusive).`);}};
fab=function(a,b,c){var d=a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT);d&&10<d.precision&&(c=c.replace("precision mediump float;","precision highp float;"));d=a.createShader(b);if(!d)throw new dab("Could not create shader");a.shaderSource(d,c);a.compileShader(d);if(a.getShaderParameter(d,a.COMPILE_STATUS))return d;c=a.getShaderInfoLog(d);a.deleteShader(d);throw new eab(`Could not compile ${b===a.VERTEX_SHADER?"vertex":"fragment"} shader. Details: ${c}`);};
gab=function(a,b){var c=a.drawingBufferWidth;a=a.drawingBufferHeight;return{width:"fixed"===b.size?b.width||c:(b.width||1)*c,height:"fixed"===b.size?b.height||a:(b.height||1)*a}};
iab=function(a,b,c){if("undefined"!==typeof WebGLRenderingContext&&a instanceof WebGLRenderingContext&&"f32"===b.numberFormat&&!a.getExtension("OES_texture_float"))throw new hab("No support for floating point textures");c=c||a.createTexture();if(!c)throw new dab(`Could not create WebGLTexture for texture with ID: '${b.id}'.`);a.bindTexture(a.TEXTURE_2D,c);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,"premultiply"===b.alpha);const d="rgb"===b.Tla?a.RGB:a.RGBA,e="f32"===b.numberFormat?a.FLOAT:a.UNSIGNED_BYTE,
f="f32"===b.numberFormat?a.NEAREST:a.LINEAR;if("image"!==b.LWb){var g="undefined"!==typeof WebGL2RenderingContext&&a instanceof WebGL2RenderingContext?d===a.RGB?e===a.FLOAT?a.RGB32F:a.RGB:e===a.FLOAT?a.RGBA32F:a.RGBA:d;const {width:h,height:k}=gab(a,b);a.texImage2D(a.TEXTURE_2D,0,g,h,k,0,d,e,b.source)}else{g=b.source;if(g="tagName"in g&&"IMG"===g.tagName){g=b.source.src;const h=document.createElement("a");h.href=g;g="data:"===h.protocol||"blob:"===h.protocol?!1:!0}g&&!b.source.crossOrigin&&console.warn(`Fragl warning: ${b.source.src} image may come from a different origin but you did not set the crossOrigin attribute.`);
a.texImage2D(a.TEXTURE_2D,0,d,d,e,b.source)}a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,f);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,f);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.bindTexture(a.TEXTURE_2D,null);return c};
__c.kab=function(a){var b={env:{devicePixelRatio:1}},c,d;const e=document.createElement("canvas");a.append(e);e.style.width="100%";e.style.height="100%";let f="Unknown";a=h=>{h.statusMessage&&(f=h.statusMessage)};e.addEventListener("webglcontextcreationerror",a);const g={alpha:null!==(c=null===b||void 0===b?void 0:b.alpha)&&void 0!==c?c:!0,antialias:null!==(d=null===b||void 0===b?void 0:b.antialias)&&void 0!==d?d:!0,depth:!1,stencil:!1,preserveDrawingBuffer:!(null===b||void 0===b||!b.preserveDrawingBuffer),
powerPreference:"high-performance"};c=(null===b||void 0===b?0:b.h4e)?e.getContext("webgl2",g):e.getContext("webgl",g);e.removeEventListener("webglcontextcreationerror",a);if(!c)throw new dab(`A WebGL context could not be created. Reason: ${f}`);return new jab(c,Object.assign({},b,{NLb:()=>{e.remove()}}))};
lab=function(a,b,c){const d=a.gl;if("shader"===c){var e=a.yta.get(b);d.deleteProgram((null===e||void 0===e?void 0:e.program)||null);a.yta.delete(b)}else if("geometry"===c){if(c=a.Goa.get(b)||null){for(e of Object.values(c.CS))d.bindBuffer(d.ARRAY_BUFFER,e),d.bufferData(d.ARRAY_BUFFER,1,d.STATIC_DRAW),d.deleteBuffer(e);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,c.indices);d.bufferData(d.ELEMENT_ARRAY_BUFFER,1,d.STATIC_DRAW);d.deleteBuffer(c.indices)}a.Goa.delete(b)}else e=a.p_.get(b),d.deleteTexture(e||null),
a.p_.delete(b)};mab=function(a){return`
attribute vec2 aPosition;
varying vec2 vTexCoord;

void main()
{
    gl_Position = vec4(aPosition, 0.0, 1.0);
    vTexCoord = aPosition * 0.5 + 0.5;
    ${a?"vTexCoord.y = 1.0 - vTexCoord.y;":""}
}
  `};oab=function(a,b,c,d){return new nab({name:a,width:b,height:c,size:d||"relative",Tla:"rgba",numberFormat:"u8"})};pab=function(a){return a.CS[a.index]};rab=function({width:a,height:b,size:c}={}){return new qab([oab("bufferA",a,b,c),oab("bufferB",a,b,c)])};
yab=function(a,b,c,d){b.forEach(e=>{var f=Object.assign({},c.LI);const g=new sab({geometry:tab,LI:f,attributes:uab,gD:a.gD,UFa:new vab({Tkb:mab(),y8a:e.uu})});if(e.inputs)for(const h of e.inputs){const k=d.get(h);if(!k)throw new hq(`Unable to assign texture input. Could not find texture '${h}'.`);f[h]=k}if(e.output){f=d.get(e.output);if(!f)throw new hq(`Unable to assign texture output. Could not find texture '${e.output}'.`);g.Pv=f}a.rRb.set(g,e);a.sS.push(g)});wab(a);xab(a,a.sS)};
wab=function(a){var b,c=null===a||void 0===a?void 0:a.GBc;if(a.Pv||c)a.sS[a.sS.length-1]===a.xAb&&a.sS.pop();else if(a.sS[a.sS.length-1]!==a.xAb){c=a.sS;var d=c.push;null!==(b=a.xAb)&&void 0!==b?a=b:(b=new sab({geometry:tab,UFa:new vab({Tkb:mab(!0),y8a:"precision mediump float;\n\nuniform sampler2D uPrevResult;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n    gl_FragColor = texture2D(uPrevResult, vTexCoord);\n    gl_FragColor.rgb *= gl_FragColor.a;\n}\n  "}),attributes:uab,LI:{uPrevResult:pab(a.CS)},
gD:a.gD}),a=a.xAb=b);d.call(c,a)}};xab=function(a,b){b.forEach((c,d)=>{if(d===b.length-1)c.LI.uPrevResult=pab(a.CS),c.Pv=a.Pv;else{var e;c.LI.uPrevResult=pab(a.CS);null!==(e=a.rRb.get(c))&&void 0!==e&&e.output||(d=a.CS,d.index=(d.index+1)%d.CS.length,c.Pv=d.CS[d.index])}})};__c.Hab=function(a,b,c,d){return a.pipe(zab(e=>!1===e?Aab(b()):Aab(b(c(e))),!1,1),Bab(()=>new Cab(1),e=>Dab(e.pipe(Eab(f=>null!=c(f))),e.pipe(Fab(1)))),Gab(e=>d(e)))};
__c.Iab=__c.D(()=>[1,2,3,4,25,5,6,7,8,9,10,11,12,13,14,15,16,17,23,18,19,20,21,22,24,26,27,28,29,30,31,32,33,34,35,36]);__c.Jab=__c.D(()=>[1,2]);__c.Kab=__c.D(()=>[1,2,3]);__c.Lab="usage";zab=__webpack_require__(407839).fU;var Aab=__webpack_require__(355760).D;var Bab=__webpack_require__(178113).O;var Cab=__webpack_require__(512630).t;var Dab=__webpack_require__(149795).z;var Eab=__webpack_require__(309027).o;var Fab=__webpack_require__(751015).q;var Gab=__webpack_require__(555709).U;var Mab,Nab;Mab=class extends Error{};Nab=class{constructor(a,b){this.xk=a;this.G=b}};__c.Dwa={};__c.Dwa.A1d=Mab;__c.Dwa.WNc=Nab;__c.Dwa.Hke=function(a){const b=Math.max(a.lastIndexOf(".jpg"),a.lastIndexOf(".jpeg")),c=a.lastIndexOf(".png");a=a.lastIndexOf(".svg");a=Math.max(b,c,a);if(-1===a)throw Error("Provided link was of an invalid file extension");return a===b?"image/jpeg":a===c?"image/png":"image/svg+xml"};var Oab,Pab;
Oab=(new Map).set("ai","application/postscript").set("avi","video/avi").set("avif","image/avif").set("csv","text/csv").set("doc","application/msword").set("docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document").set("eps","image/eps").set("gif","image/gif").set("heic","image/heic").set("heif","image/heif").set("jpg","image/jpeg").set("jxr","image/jxr").set("key","application/vnd.apple.keynote").set("m4a","audio/x-m4a").set("m4v","video/x-m4v").set("mkv","video/x-matroska").set("mov","video/quicktime").set("mp3",
"audio/mp3").set("mp4","video/mp4").set("mpeg","video/mpeg").set("numbers","application/vnd.apple.numbers").set("odg","application/vnd.oasis.opendocument.graphics").set("odp","application/vnd.oasis.opendocument.presentation").set("ods","application/vnd.oasis.opendocument.spreadsheet").set("odt","application/vnd.oasis.opendocument.text").set("ogg","audio/ogg").set("pages","application/vnd.apple.pages").set("pdf","application/pdf").set("png","image/png").set("ppt","application/vnd.ms-powerpoint").set("pptx",
"application/vnd.openxmlformats-officedocument.presentationml.presentation").set("psd","image/vnd.adobe.photoshop").set("svg","image/svg+xml").set("tiff","image/tiff").set("wav","audio/wav").set("wdp","image/vnd.ms-photo").set("webm","video/webm").set("webp","image/webp").set("xls","application/vnd.ms-excel").set("xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");
Pab=(new Map).set("otf","font/otf").set("rar","application/vnd.rar").set("ttf","font/ttf").set("woff","font/woff").set("woff2","font/woff2");__c.Z$a=new Map([...Oab,...Pab]);__c.iq=class extends Error{};__c.Qab=class extends __c.iq{constructor(){super(...arguments);this.Mxc=!0}};__c.Rab=class extends __c.iq{};__c.jq=class extends __c.Qab{};var kq,eab,dab,lq,hab,Sab;kq=class extends Error{};eab=class extends kq{};dab=class extends kq{};lq=class extends kq{};hab=class extends kq{};hq=__c.hq=class extends kq{};Sab=class extends kq{};__c.mq=0;var Tab=class{constructor(){var a={GJa:{position:{type:"f32",offset:0,buffer:new Float32Array([-1,-1,-1,1,1,-1,1,1])}},indices:new Uint16Array([0,3,1,0,2,3])};this.id=__c.mq++;this.resourceType="geometry";for(const [b,c]of Object.entries(a.GJa))c.name=b;this.GJa=a.GJa;this.indices=a.indices;this.WFb=a.WFb}};var sab=class{constructor(a){this.geometry=a.geometry;this.UFa=a.UFa;this.attributes=a.attributes;this.LI=a.LI;this.gD=a.gD;this.Pv=a.Pv;this.Jbc=a.Jbc}};__c.Uab=class{constructor(a){this.resources=new Map;this.create=a;this.backend=aab(this)}load(a){this.backend.load(a);a=Array.isArray(a)?a:a.resources;for(const b of a)this.resources.set(b.id,b)}update(a){this.backend.update(a)}clear(a,b){this.backend.clear(a,b)}render(a){this.backend.render(a)}readPixels(a){return this.backend.readPixels(a)}flush(){this.backend.flush()}release(a){this.backend.release(a);a=Array.isArray(a)?a:a.resources;for(const b of a)this.resources.delete(b.id)}dispose(){this.backend.dispose();
this.resources.clear()}restore(){this.backend.dispose();this.backend=aab(this);this.backend.load(Array.from(this.resources.values()))}resize(...a){const [b,c]=a;if(b!==this.canvas.width||c!==this.canvas.height)this.backend.resize(...a),a=Array.from(this.resources.values()).filter(d=>"texture"===d.resourceType&&!d.source&&"relative"===d.size),this.backend.update(a)}get canvas(){return this.backend.canvas}};var vab=class{constructor(a){this.id=__c.mq++;this.resourceType="shader";this.Tkb=a.Tkb;this.y8a=a.y8a}};var nab;__c.Vab=class{constructor(a){this.id=__c.mq++;this.resourceType="texture";this.LWb="image";this.size="fixed";this.Tla="rgba";this.numberFormat="u8";this.source=a.source;this.name=a.name;this.alpha=a.alpha||"preserve"}get width(){return this.source.width}get height(){return this.source.height}};
nab=class{constructor(a){this.id=__c.mq++;this.resourceType="texture";this.LWb="render";this.source=null;this.name=a.name;this.alpha=a.alpha||"preserve";this.size=a.size||"fixed";this.width=a.width||("fixed"===this.size?0:1);this.height=a.height||("fixed"===this.size?0:1);this.Tla=a.Tla;this.numberFormat=a.numberFormat}};var Wab=new Map([["i8",5120],["i16",5122],["u8",5121],["u16",5123],["f32",5126]]),Xab=new Map([[5126,{type:"float",name:"float",length:1}],[35664,{type:"float",name:"vec2",length:2}],[35665,{type:"float",name:"vec3",length:3}],[35666,{type:"float",name:"vec4",length:4}],[35674,{type:"matrix",name:"mat2",length:4}],[35675,{type:"matrix",name:"mat3",length:9}],[35676,{type:"matrix",name:"mat4",length:16}],[5124,{type:"int",name:"int",length:1}],[35667,{type:"int",name:"ivec2",length:2}],[35668,{type:"int",
name:"ivec3",length:3}],[35669,{type:"int",name:"ivec4",length:4}],[35678,{type:"int",name:"sampler2D",length:1}]]);var Yab=class{constructor(a,b,c){this.name=a.name;this.length=a.size;this.location=b;b=Xab.get(a.type);if(!b)throw new hq(`Type of uniform '${a.name}' is not supported.`);this.meta=b;this._data=bab(this,c)}equals(a){const b=this._data;if(b.length!==a.length)return!1;for(let c=0;c<b.length;c++)if(b[c]!==a[c])return!1;return!0}get data(){return this._data}set data(a){this._data=bab(this,a)}};var jab=class{constructor(a,b){this.gl=a;this.Goa=new Map;this.yta=new Map;this.p_=new Map;this.Ngc=()=>{this.LTa&&this.LTa(new lq("Error: WebGL context lost"))};this.env=(null===b||void 0===b?void 0:b.env)||window||{devicePixelRatio:1};const c=a.canvas;if(!c)throw new lq(`Unexpected canvas type: ${typeof c}`);this.NLb=null===b||void 0===b?void 0:b.NLb;this.canvas=c;const [d,e]=this.qW;this.canvas.width=((null===b||void 0===b?void 0:b.width)||d)*this.env.devicePixelRatio;this.canvas.height=((null===
b||void 0===b?void 0:b.height)||e)*this.env.devicePixelRatio;this.canvas.addEventListener("webglcontextlost",this.Ngc,{once:!0});this.N7a=a.createFramebuffer()}flush(){this.gl.flush()}resize(...a){let b,c;"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?[b=this.canvas.clientWidth,c=this.canvas.clientHeight]=a:[b,c]=a;this.canvas.width=b*this.env.devicePixelRatio;this.canvas.height=c*this.env.devicePixelRatio}load(a){const b=this.gl;a=Array.isArray(a)?a:a.resources;
for(const q of a)if("shader"===q.resourceType){if(!this.yta.has(q.id)){a=this.yta;var c=a.set,d=q.id;var e=q.Tkb,f=q.y8a;var g=b.createProgram();if(!g)throw new dab("Could not create program");e=fab(b,b.VERTEX_SHADER,e);f=fab(b,b.FRAGMENT_SHADER,f);b.attachShader(g,e);b.attachShader(g,f);b.linkProgram(g);b.deleteShader(e);b.deleteShader(f);if(!b.getProgramParameter(g,b.LINK_STATUS))throw new eab(`Could not link program. Details: ${b.getProgramInfoLog(g)}`);b.useProgram(g);e=b.getProgramParameter(g,
b.ACTIVE_ATTRIBUTES);f=new Map;for(var h=0;h<e;h++){var k=b.getActiveAttrib(g,h),m=k?b.getAttribLocation(g,k.name):-1;if(!k||-1===m)throw new Sab(`Could not cache attribute. Could not find attribute or location at index ${h}. This is likely a bug with the renderer.`);var n=Xab.get(k.type);if(!n)throw new hq(`Type of attribute '${k.name}' is not supported.`);b.enableVertexAttribArray(m);f.set(k.name,{location:m,meta:n})}e=b.getProgramParameter(g,b.ACTIVE_UNIFORMS);h=new Map;k=new Map;m=0;for(n=0;n<
e;n++){var p=b.getActiveUniform(g,n);const v=p?b.getUniformLocation(g,p.name):null;if(!p||!v)throw new Sab(`Could not cache uniform. Could not find uniform or location at index ${n}. This is likely a bug with the renderer.`);const w=p.name.endsWith("[0]")?p.name.slice(0,-3):p.name;p.type===b.SAMPLER_2D||p.type===b.SAMPLER_CUBE?(p=new Yab(p,v,[m]),h.set(w,p),cab(b,p),m++):(p=new Yab(p,v),k.set(w,p),cab(b,p))}b.useProgram(null);c.call(a,d,{program:g,attributes:f,LI:h,gD:k})}}else if("geometry"===q.resourceType){if(!this.Goa.has(q.id)){a=
this.Goa;c=a.set;d=q.id;g=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,g);b.bufferData(b.ELEMENT_ARRAY_BUFFER,q.indices,b.STATIC_DRAW);f=new Map;for(const [v,w]of Object.entries(q.GJa))e=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,e),b.bufferData(b.ARRAY_BUFFER,w.buffer,b.STATIC_DRAW),f.set(v,e);b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);c.call(a,d,{indices:g,CS:f})}}else this.p_.has(q.id)||this.p_.set(q.id,iab(b,q))}update(a){const b=this.gl;a=Array.isArray(a)?
a:a.resources;for(const c of a)if("texture"===c.resourceType){a=this.p_.get(c.id);if(!a)throw new lq(`Could not update texture with ID: '${c.id}'. Did you remember to use load()?`);iab(b,c,a)}}clear(a,b){const c=this.gl;if(b){const d=this.p_.get(b.id);if(!d)throw new lq(`Could not find render target with ID: ${b.id}. Did you remember to use load()?`);c.bindFramebuffer(c.FRAMEBUFFER,this.N7a);c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,d,0)}else c.bindFramebuffer(c.FRAMEBUFFER,
null);c.clearColor(...a);c.clear(c.COLOR_BUFFER_BIT)}render(a){var b,c;const d=this.gl;a=Array.isArray(a)?a:a.aHd;for(const h of a){var e=this.yta.get(h.UFa.id);if(!e)throw new lq(`Could not find shader with ID: ${h.UFa.id}. Did you remember to use load()?`);h.Jbc?(d.enable(d.BLEND),d.blendFunc(d.ONE,d.ONE_MINUS_SRC_ALPHA)):d.disable(d.BLEND);d.useProgram(e.program);var f=this.Goa.get(h.geometry.id);if(!f)throw new lq(`Could not find geometry with ID: ${h.geometry.id}. Did you remember to use load()?`);
d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,f.indices);const k=(a=!!h.geometry.WFb)?d.getExtension("ANGLE_instanced_arrays"):null;if(a&&!k)throw new hab("Instancing is required but not supported on this device");for(const [m,{location:n,meta:p}]of e.attributes.entries()){var g=h.attributes[m];const q=Wab.get(g.type);if(!q)throw new Sab(`Could not determine type for attribute ${m}. This is likely a bug with the renderer.`);const v=f.CS.get(g.name);if(!v)throw new Sab(`Could not locate geometry buffer "${g.name}. This is likely a bug with the renderer`);
d.bindBuffer(d.ARRAY_BUFFER,v);d.vertexAttribPointer(n,p.length,q,null!==(b=g.wIe)&&void 0!==b?b:!1,null!==(c=g.stride)&&void 0!==c?c:0,g.offset);a&&g.divisor&&k.vertexAttribDivisorANGLE(n,g.divisor)}f=Object.assign({},h.gD,this.R1c);for(const [m,n]of e.gD.entries()){g=f[m];if(!g)throw new hq(`Could not find a value for uniform '${m}'. Make sure you provide a value.`);n.equals(g)||(n.data=g,cab(d,n))}for(const [m,n]of e.LI.entries()){d.activeTexture(d.TEXTURE0+n.data.flat()[0]);d.bindTexture(d.TEXTURE_2D,
null);e=h.LI[m];if(!e)throw new hq(`Could not find a texture associated with uniform '${m}'. Make sure you provide a value.`);f=this.p_.get(e.id);if(!f)throw new lq(`Could not find texture with ID: ${e.id}. Did you remember to use load()?`);d.bindTexture(d.TEXTURE_2D,f)}if(h.Pv){e=this.p_.get(h.Pv.id);if(!e)throw new lq(`Could not find render target with ID: ${h.Pv.id}. Did you remember to use load()?`);const {width:m,height:n}=gab(d,h.Pv);d.bindFramebuffer(d.FRAMEBUFFER,this.N7a);d.framebufferTexture2D(d.FRAMEBUFFER,
d.COLOR_ATTACHMENT0,d.TEXTURE_2D,e,0);d.viewport(0,0,m,n)}else d.bindFramebuffer(d.FRAMEBUFFER,null),d.viewport(0,0,d.drawingBufferWidth,d.drawingBufferHeight);a?k.drawElementsInstancedANGLE(d.TRIANGLES,h.geometry.indices.length,d.UNSIGNED_SHORT,0,h.geometry.WFb):d.drawElements(d.TRIANGLES,h.geometry.indices.length,d.UNSIGNED_SHORT,0)}}release(a){a=Array.isArray(a)?a:a.resources;for(const b of a)lab(this,b.id,b.resourceType)}readPixels(a){const b=this.gl;if(a){var c=this.p_.get(a.id);if(!c)throw new lq(`Could not find render target with ID: ${a.id}. Did you remember to use load()?`);
a=gab(b,a);b.bindFramebuffer(b.FRAMEBUFFER,this.N7a);b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,c,0)}else b.bindFramebuffer(b.FRAMEBUFFER,null),a={width:b.drawingBufferWidth,height:b.drawingBufferHeight};c=new Uint8Array(a.width*a.height*4);b.readPixels(0,0,a.width,a.height,b.RGBA,b.UNSIGNED_BYTE,c);return new ImageData(new Uint8ClampedArray(c.buffer),a.width,a.height)}dispose(){var a;const b=this.gl;for(var c of this.Goa.keys())lab(this,c,"geometry");for(var d of this.yta.keys())lab(this,
d,"shader");for(const e of this.p_.keys())lab(this,e,"texture");this.Goa.clear();this.yta.clear();this.p_.clear();b.deleteFramebuffer(this.N7a);b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);b.bindRenderbuffer(b.RENDERBUFFER,null);b.bindFramebuffer(b.FRAMEBUFFER,null);c=b.getParameter(b.MAX_TEXTURE_IMAGE_UNITS);for(d=0;d<c;d++)b.activeTexture(b.TEXTURE0+d),b.bindTexture(b.TEXTURE_2D,null),b.bindTexture(b.TEXTURE_CUBE_MAP,null);this.canvas.width=this.canvas.height=0;this.canvas.removeEventListener("webglcontextlost",
this.Ngc);null===(a=this.NLb)||void 0===a?void 0:a.call(this)}get R1c(){return{uResolution:[this.gl.drawingBufferWidth,this.gl.drawingBufferHeight],uViewSize:this.qW,uDevicePixelRatio:[this.env.devicePixelRatio]}}get qW(){return"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?[this.canvas.clientWidth,this.canvas.clientHeight]:[this.canvas.width,this.canvas.height]}};var tab,uab,qab;tab=new Tab;uab={aPosition:tab.GJa.position};qab=class{constructor(a){this.index=0;this.CS=null!==a&&void 0!==a?a:[new nab({Tla:"rgba",numberFormat:"u8"}),new nab({Tla:"rgba",numberFormat:"u8"})]}};
__c.Zab=class{constructor(a){var b,c,d,e,f,g,h,k,m,n,p;this.sS=[];this.rRb=new Map;this.gD={};this.Pv=null===(b=a.options)||void 0===b?void 0:b.Pv;this.GBc=null!==(d=null===(c=a.options)||void 0===c?void 0:c.GBc)&&void 0!==d?d:!1;if(a.gD)for(const [v,w]of Object.entries(a.gD))this.gD[v]=Array.isArray(w)?w:[w];b=[];for(c=0;c<a.iOb.length;c++)d=a.iOb[c],"string"===typeof d?b.push({uu:d}):b.push(d);this.CS=(null===(e=a.options)||void 0===e?void 0:e.CS)||rab(null===(f=a.options)||void 0===f?void 0:f.Pv);
e=new Set;for(var q of b)if(q.inputs){for(const v of q.inputs){if("uPrevResult"===v)throw new hq("Your render pass should not define uPrevResult. This will be automatically added.");e.add(v)}q.output&&e.add(q.output)}q=new Map;for(const v of e)q.set(v,oab(v,null===(h=null===(g=a.options)||void 0===g?void 0:g.Pv)||void 0===h?void 0:h.width,null===(m=null===(k=a.options)||void 0===k?void 0:k.Pv)||void 0===m?void 0:m.height,null===(p=null===(n=a.options)||void 0===n?void 0:n.Pv)||void 0===p?void 0:p.size));
yab(this,b,a,q)}update(a){var b;if(a.LI)for(const [d,e]of Object.entries(a.LI))if(e)for(var c of this.sS)c.LI[d]=e;if(a.gD)for(const [d,e]of Object.entries(a.gD))this.gD[d]&&(this.gD[d]=Array.isArray(e)?e:[e]);void 0!==a.Pv&&(c=this.Pv,this.Pv=null!==(b=a.Pv)&&void 0!==b?b:void 0,!c&&this.Pv||c&&!this.Pv)&&(wab(this),xab(this,this.sS))}get resources(){const a=new Set,b=new Set,c=new Set;for(const d of this.sS){a.add(d.geometry);b.add(d.UFa);for(const e of Object.values(d.LI))c.add(e);d.Pv&&c.add(d.Pv)}return[...a,
...b,...c]}get aHd(){const a=Object.fromEntries(Object.entries(this.gD).map(([c,d])=>[c,1===d.length?d[0]:d])),b=this.sS.filter(c=>{var d;return(c=null===(d=this.rRb.get(c))||void 0===d?void 0:d.IXe)?c(a):!0});xab(this,b);return b}};__c.$ab=["TAEXfxtKgiU","TAEk0keR1-4","TAEXf0f4iUk","TAEk0G9v1k0","TAEXf9q2RoI"];[...__c.$ab];
}).call(self, self._fe4d99ebe0d2d259646a80d250150d47);}

}])
//# sourceMappingURL=sourcemaps/e4630b137ec81be1.js.map